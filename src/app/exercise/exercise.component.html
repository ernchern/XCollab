<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title">We value constructive discussion!</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <style>
	.column {
    float: left;
    width: 50%;
    padding: 10px;
    height: 200px;
	}
	</style>
	<div class="column" style="background-color:#ffcccc;text-align: center">
	This sounds complicated.
	</div>
	<div class="column" style="background-color:#b3ffcc;text-align: center">
	If y~N(0.1+b,0.1+b), why do I need to consider y as a Normal random variable, if b only takes discrete values? Shouldn't it be a Bernoulli random variable?
	</div>
	<h4 style="text-align: center">Which one do you think would be more helpful?</h4>
	<p style="text-align: center">In our community, we believe that every student is capable of contributing to everyone's learning experience with constructive discussion.</p>
	<p style="text-align: center">Could you take a moment to improve your input?</p>
	
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Review</button>
  </div>
</ng-template>

<div class="container mt-4">
    <div class="row mb-4">
        <div class="col">
            <!-- Top bar -->
            <div class="form-group">
                <button (click)="goBack()" class="btn float-left">Go back to search</button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col" [class.col-12]="!showDiscussion">
            <!-- Exercise -->
            <div class="card border-secondary mx-auto rounded document_open pre-scrollable">
                <div class="card-header bg-secondary">
                    <div class="d-flex flex-row bd-highlight mb-3">
                        <div class="p-2 flex-fill bd-highlight">
                            <p>{{(exercise?.title)}}, {{exercise?.tags}}</p>
                        </div>
                        <div class="p-2 flex-fill bd-highlight">
                            <div class="buttons">
                                <button (click)="unlockDiscussion()" *ngIf="discussionUnlocked" class="btn float-right">Discussions</button>
                                <button (click)="unlockDiscussion()" *ngIf="!discussionUnlocked" class="btn float-right">Discussions (-1)</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse blandit nec neque ac vehicula. Fusce maximus metus et mi bibendum convallis sit amet et ipsum. Duis dui odio, viverra non hendrerit vitae, facilisis quis nibh. Fusce eu accumsan nulla, eget varius turpis. Integer maximus quam elit, nec finibus nulla egestas in. Ut eu leo sit amet lectus dictum maximus. Proin facilisis sit amet sem mattis luctus. Nulla orci magna, vulputate in sagittis at, lobortis vitae neque. Cras vestibulum massa pretium pellentesque pharetra. Sed sit amet congue justo, vitae elementum sapien. Fusce molestie neque in mi pretium elementum.

                    Ut accumsan finibus ligula, sit amet imperdiet velit interdum at. Praesent dui lectus, lobortis eget justo sed, rhoncus commodo sem. Suspendisse in neque a nisl convallis bibendum sed iaculis est. Cras volutpat interdum sapien, eget tempus dolor consectetur vitae. Suspendisse nec facilisis ligula. Donec convallis, lectus vitae feugiat ultrices, odio sapien ornare purus, semper euismod lectus risus et odio. Aenean sodales egestas felis, ut dignissim justo rhoncus sit amet. Mauris quis sollicitudin felis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec fringilla quam non imperdiet consequat. Mauris ultricies turpis nunc, in tempus metus gravida ac. Cras pulvinar mauris a erat congue gravida.
                </div>
            </div>
        </div>
        <div class="col">
            <!-- Discussion -->
            <div class="card primary mx-auto rounded discussion" [hidden]="!showDiscussion">
                <div class="card-body">
                    <div class="list-group">
                        <div *ngFor="let discussion of discussions" class="discussion list-group-item list-group-item-action"style="z-index=-1">
                            <app-discussion-preview [discussion]="discussion"></app-discussion-preview>
                        </div>
                    </div>
                    <br>
                    <form class="form" (ngSubmit)="checkLength()&&discussionForm.reset()" #discussionForm="ngForm">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Title</span>
                            </div>
                            <input class="form-control custom-control" required [(ngModel)]="discussion.title" placeholder="Title" aria-label="Title" name="title">
                        </div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Body</span>
                            </div>

                            <textarea class="form-control custom-control" required rows="3" [(ngModel)]="discussion.body" placeholder="Body" aria-label="Body" name="body"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary input-group-addon float-right" [disabled]="!discussionForm.form.valid" (click)="checkLength()? saveDiscussion() : open(content)">Submit (+2)</button>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>
